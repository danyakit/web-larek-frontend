# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание данных

### Проект "Веб-ларек" состоит из нескольких основных компонентов:

- **Данные (Data):** Включают в себя информацию о товарах, состоянии корзины, деталях заказа и прочие данные, необходимые для функционирования приложения.
- **Отображение (View):** Этот компонент отвечает за отображение данных пользователю. Он представляет собой HTML-разметку, стилизованную с помощью SCSS и динамически изменяемую с помощью JavaScript/TypeScript.
- **Экраны (Screens):** Это набор пользовательских интерфейсов, представляющих различные страницы или состояния приложения, например, главную страницу, страницу корзины и страницу оформления заказа.
- **Логика (Logic):** Этот компонент содержит всю бизнес-логику приложения, такую как добавление товаров в корзину, оформление заказа, валидация данных и взаимодействие с сервером.

### Роли и функции компонентов

- **Данные (Data):** Этот компонент хранит информацию о товарах, корзине, заказах и других состояниях приложения. Взаимодействие с данными происходит через соответствующие методы и события.
- **Отображение (View):** Отображает данные пользователю в удобном и понятном виде. Этот компонент отвечает за визуальное представление информации, полученной из компонента данных.
- **Экраны (Screens):** Представляют набор интерфейсов, через которые пользователь может взаимодействовать с приложением. Каждый экран представляет определенную функциональность, например, просмотр каталога товаров или оформление заказа.
- **Логика (Logic):** Этот компонент содержит бизнес-логику приложения. Он обрабатывает действия пользователя, взаимодействует с данными, обрабатывает ошибки и отправляет запросы на сервер.

### Взаимодействие компонентов

Взаимодействие внутри приложения происходит через события. Модели инициализируют события, слушатели событий в основном коде выполняют передачу данных компонентам отображения, а также вычислениями между этой передачей, и еще они меняют значения в моделях.

### Используемые данные

В приложении используются следующие типы данных и интерфейсы:

- **ICardItem:** Интерфейс, описывающий отдельный товар.
- **ICardList:** Интерфейс, представляющий список товаров.
- **IOrderForm:** Интерфейс, описывающий форму заказа.
- **IOrderResult:** Интерфейс, представляющий результат заказа.
- **IBasketItem:** Тип, представляющий элемент корзины.
- **IAppState:** Интерфейс, описывающий состояние приложения.
- **FormErrors:** Тип, представляющий возможные ошибки формы заказа.

### Компоненты приложения

Приложение состоит из следующих компонентов:

- **Каталог (Catalog):** Отображает список товаров из каталога.
- **Корзина (Basket):** Показывает товары, добавленные в корзину, и позволяет пользователю управлять ими.
- **Предпросмотр (Preview):** Позволяет пользователю просматривать изображение товара перед его покупкой.
- **Форма заказа (Order Form):** Предоставляет пользователю возможность оформить заказ, указав необходимую информацию.

### Процессы в приложении

В приложении взаимодействие между компонентами осуществляется через события. Бизнес-логика приложения выполняется в основном с помощью promise-based flow, когда определенные действия (например, оформление заказа) инициируются пользователем и обрабатываются соответствующими методами.

### Классы и методы

#### Класс: DataController<T>

**Описание:**
Класс `DataController` представляет компонент данных приложения. Он отвечает за хранение информации о товарах, корзине, заказах и других состояниях приложения.

**Конструктор:**
`constructor(initialData: T)`: Создает новый экземпляр класса `DataController` с начальными данными типа `T`.

**Поля:**
- `data: T`: Хранит текущие данные приложения.

**Методы:**
- `getData(): T`: Возвращает текущие данные приложения.
- `setData(newData: T): void`: Обновляет данные приложения новыми данными.

#### Класс: ViewRenderer

**Описание:**
Класс `ViewRenderer` отвечает за отображение данных пользователю. Он представляет собой интерфейс между компонентом данных и компонентом отображения.

**Методы:**
- `render(data: any): void`: Отображает данные пользователю.

#### Класс: ScreenManager

**Описание:**
Класс `ScreenManager` управляет навигацией и отображением экранов приложения.

**Методы:**
- `showScreen(screenName: string): void`: Отображает указанный экран приложения.

#### Класс: LogicController

**Описание:**
Класс `LogicController` содержит бизнес-логику приложения. Он обрабатывает действия пользователя, взаимодействует с данными и отправляет запросы на сервер.

**Методы:**
- `addToCart(itemId: string): void`: Добавляет товар в корзину по его идентификатору.
- `submitOrder(orderDetails: IOrderForm): Promise<IOrderResult>`: Отправляет запрос на сервер для оформления заказа с указанными деталями и возвращает результат, содержащий идентификатор заказа и общую стоимость.
- `validateOrderDetails(orderDetails: IOrderForm): FormErrors`: Проверяет корректность заполнения формы оформления заказа и возвращает ошибки, если таковые имеются.

#### Класс: ErrorHandler

**Описание:**
Класс `ErrorHandler` отвечает за обработку ошибок, возникающих при загрузке данных или выполнении запросов на сервер.

**Методы:**
- `handleError(error: Error): void`: Обрабатывает ошибку и выводит соответствующее сообщение пользователю.

#### Класс: CatalogComponent

**Описание:**
Класс `CatalogComponent` представляет компонент отображения каталога товаров.

**Методы:**
- `renderCatalogItems(items: ICardItem[]): void`: Отображает список товаров из каталога.

#### Класс: BasketComponent

**Описание:**
Класс `BasketComponent` отображает товары, добавленные в корзину, и позволяет пользователю управлять ими.

**Методы:**
- `renderBasketItems(items: IBasketItem[]): void`: Отображает список товаров в корзине.
- `updateBasketTotal(total: number): void`: Обновляет общую стоимость товаров в корзине.

#### Класс: OrderFormComponent

**Описание:**
Класс `OrderFormComponent` представляет компонент формы оформления заказа.

**Методы:**
- `renderOrderForm(): void`: Отображает форму оформления заказа.
- `validateOrderForm(): void`: Проверяет корректность заполнения формы.

#### Класс: PreviewComponent

**Описание:**
Класс `PreviewComponent` позволяет пользователю просматривать изображение товара перед его покупкой.

**Методы:**
- `renderPreview(imageUrl: string): void`: Отображает предпросмотр изображения товара.

Это описание классов и методов поможет лучше понять структуру и функциональность. При внесении изменений в код, документация будет актуализирована.
