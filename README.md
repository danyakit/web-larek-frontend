# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание данных

### Архитектура проекта:

Основные компоненты:

- **Данные:** Представление информации, используемой в приложении, такие как данные пользователя, списки элементов и т. д.
  
- **Отображения:** Компоненты пользовательского интерфейса, которые отображают информацию и реагируют на действия пользователя.
  
- **Брокер событий (EventEmitter):** Механизм для управления событиями в приложении, включая подписку, отписку и генерацию событий.
  
- **API:** Класс для выполнения HTTP-запросов к удаленному API и обмена данными с сервером.
  
- **Модели:** Классы, представляющие данные в приложении и обеспечивающие механизм уведомления об изменениях.

### Функции:

- **Данные:** Хранение информации, необходимой для работы приложения.
  
- **Отображения:** Отображение данных для пользователя и обработка пользовательских действий.
  
- **Брокер событий (EventEmitter):** Обеспечение взаимодействия между компонентами приложения путем передачи сообщений о событиях.
  
- **API:** Предоставление интерфейса для обмена данными между клиентом и сервером.
  
- **Модели:** Управление данными и уведомление компонентов об изменениях.

### Взаимодействие компонентов:

- **Отображения и модели:** Отображения могут получать данные из моделей и отображать их для пользователя. Модели также могут уведомлять отображения об изменениях данных.
  
- **Отображения и API:** Отображения могут использовать API для получения или отправки данных на сервер.
  
- **Отображения и брокер событий (EventEmitter):** Отображения могут подписываться на события, генерируемые другими компонентами, например, моделями или API, чтобы реагировать на изменения.

### Используемые данные:

- **Данные пользователя:** Тип: User, содержащий информацию о текущем пользователе.
  
- **Список элементов:** Тип: Item[], представляющий коллекцию элементов, отображаемых в приложении.

### Компоненты приложения:

- **Формы (Form):** Классы, представляющие формы для ввода данных пользователем.
  
- **Модальные окна (Modal):** Классы, отображающие модальные окна для дополнительной информации или действий пользователя.

### Реализация процессов в приложении:

- **События:** Взаимодействие между компонентами осуществляется через брокер событий (EventEmitter), который предоставляет механизм подписки, отписки и генерации событий. Например, при изменении данных модели, модель генерирует событие, на которое подписываются соответствующие отображения для их обновления.
  
- **API запросы:** Взаимодействие с удаленным сервером осуществляется через класс API, который предоставляет методы для выполнения HTTP-запросов (GET, POST) и обработки полученных данных. Например, отображения могут использовать методы API для получения данных с сервера или отправки обновлений.




# Класс EventEmitter

`EventEmitter` является классической реализацией брокера событий, предназначенного для управления событиями в приложении. Он обеспечивает механизм подписки, отписки и генерации событий.

## Публичные методы

- `on(eventName: EventName, callback: (event: T) => void): void`
  - **Описание:** Устанавливает обработчик на указанное событие.
  - **Параметры:**
    - `eventName: EventName` - имя события или регулярное выражение для подписки на группу событий.
    - `callback: (event: T) => void` - функция-обработчик, вызываемая при возникновении события.

- `off(eventName: EventName, callback: Subscriber): void`
  - **Описание:** Снимает установленный ранее обработчик с указанного события.
  - **Параметры:**
    - `eventName: EventName` - имя события.
    - `callback: Subscriber` - функция-обработчик, которую необходимо снять.

- `emit(eventName: string, data?: T): void`
  - **Описание:** Генерирует указанное событие со связанными данными.
  - **Параметры:**
    - `eventName: string` - имя события.
    - `data?: T` - данные, связанные с событием (опционально).

- `onAll(callback: (event: EmitterEvent) => void): void`
  - **Описание:** Устанавливает обработчик для всех событий.
  - **Параметры:**
    - `callback: (event: EmitterEvent) => void` - функция-обработчик, вызываемая при возникновении любого события.

- `offAll(): void`
  - **Описание:** Удаляет все установленные обработчики событий.

- `trigger(eventName: string, context?: Partial<T>): (data: T) => void`
  - **Описание:** Создает коллбек-триггер, который генерирует указанное событие с данными при вызове.
  - **Параметры:**
    - `eventName: string` - имя события.
    - `context?: Partial<T>` - контекст, который может быть добавлен к данным события (опционально).

# Класс Api

`Api` предоставляет методы для выполнения HTTP-запросов к удаленному API.

## Конструктор

- `constructor(baseUrl: string, options: RequestInit = {})`
  - **Описание:** Создает экземпляр класса для работы с удаленным API.
  - **Параметры:**
    - `baseUrl: string` - базовый URL API.
    - `options: RequestInit` - опции запроса (опционально).

## Публичные методы

- `get(uri: string): Promise<object>`
  - **Описание:** Выполняет GET-запрос к указанному URI.
  - **Параметры:**
    - `uri: string` - путь к ресурсу.

- `post(uri: string, data: object, method: ApiPostMethods = 'POST'): Promise<object>`
  - **Описание:** Выполняет POST-запрос к указанному URI.
  - **Параметры:**
    - `uri: string` - путь к ресурсу.
    - `data: object` - данные для отправки.
    - `method: ApiPostMethods` - метод запроса (опционально, по умолчанию 'POST').

# Класс Model

`Model` представляет базовую модель, которая используется для работы с данными. Он обеспечивает механизм обновления данных и уведомления об изменениях.

## Конструктор

- `constructor(data: Partial<T>, events: IEvents)`
  - **Описание:** Создает экземпляр модели с заданными данными и брокером событий для уведомлений.
  - **Параметры:**
    - `data: Partial<T>` - начальные данные модели.
    - `events: IEvents` - брокер событий.

## Публичные методы

- `emitChanges(event: string, payload?: object): void`
  - **Описание:** Генерирует событие об изменении модели.
  - **Параметры:**
    - `event: string` - имя события.
    - `payload?: object` - данные, связанные с событием (опционально).

# Класс Component

`Component` представляет базовый компонент пользовательского интерфейса. Он обеспечивает инструменты для работы с DOM элементами и поведением компонента.

## Конструктор

- `constructor(container: HTMLElement)`
  - **Описание:** Создает экзземпляр компонента, привязывая его к указанному контейнеру.
  - **Параметры:**
    - `container: HTMLElement` - элемент контейнера, в который будет помещен компонент.

## Методы

- `toggleClass(element: HTMLElement, className: string, force?: boolean): void`
  - **Описание:** Переключает класс для указанного элемента.
  - **Параметры:**
    - `element: HTMLElement` - элемент DOM, для которого будет изменен класс.
    - `className: string` - имя класса, которое нужно переключить.
    - `force?: boolean` - опциональный параметр, указывающий, нужно ли явно добавить или удалить класс.

- `setText(element: HTMLElement, value: unknown): void`
  - **Описание:** Устанавливает текстовое содержимое для указанного элемента.
  - **Параметры:**
    - `element: HTMLElement` - элемент DOM, для которого будет установлен текст.
    - `value: unknown` - значение текста.

- `setDisabled(element: HTMLElement, state: boolean): void`
  - **Описание:** Изменяет статус блокировки для указанного элемента.
  - **Параметры:**
    - `element: HTMLElement` - элемент DOM, для которого будет изменен статус блокировки.
    - `state: boolean` - новое состояние блокировки (true - заблокирован, false - разблокирован).

- `setHidden(element: HTMLElement): void`
  - **Описание:** Скрывает указанный элемент.
  - **Параметры:**
    - `element: HTMLElement` - элемент DOM, который будет скрыт.

- `setVisible(element: HTMLElement): void`
  - **Описание:** Отображает указанный элемент.
  - **Параметры:**
    - `element: HTMLElement` - элемент DOM, который будет отображен.

- `setImage(element: HTMLImageElement, src: string, alt?: string): void`
  - **Описание:** Устанавливает изображение и альтернативный текст для указанного элемента типа HTMLImageElement.
  - **Параметры:**
    - `element: HTMLImageElement` - элемент изображения.
    - `src: string` - URL изображения.
    - `alt?: string` - опциональный текст для альтернативного описания изображения.

- `render(data?: Partial<T>): HTMLElement`
  - **Описание:** Рендерит компонент с использованием переданных данных. Этот метод должен быть переопределен в дочерних классах.
  - **Параметры:**
    - `data?: Partial<T>` - данные для рендеринга (опционально).

## Взаимосвязь между компонентами

- `Component` является базовым классом для всех компонентов пользовательского интерфейса.
- `Model` используется для управления данными в приложении и может взаимодействовать с компонентами через события.
- `Api` предоставляет методы для выполнения HTTP-запросов к удаленному API, а также может использоваться в компонентах для получения и отправки данных.
- `EventEmitter` предоставляет механизм для управления событиями в приложении и может использоваться для взаимодействия между компонентами, моделями и API.

## Основные типы/интерфейсы 

### Category

- **Тип:** перечисление (string)
- **Описание:** Определяет категорию товара. Включает в себя следующие варианты: "софт-скил", "другое", "дополнительное", "кнопка", "хард-скил".

### ICardItem

- **Описание:** Интерфейс элемента карточки товара.
- **Поля:**
  - id: уникальный идентификатор товара (string).
  - description: описание товара (string).
  - image: URL изображения товара (string).
  - title: название товара (string).
  - category: категория товара (Category).
  - price: цена товара, может быть null если цена не установлена (number | null).

### ICardList

- **Описание:** Интерфейс списка карточек товаров.
- **Поля:**
  - total: общее количество элементов в списке (number).
  - items: массив элементов карточек товаров (ICardItem[]).

### ICards

- **Тип:** объединение типов (ICardItem & ICardList).
- **Описание:** Объединенный тип для карточки товара и списка карточек товаров.

### IBasketItem

- **Описание:** Интерфейс элемента корзины.
- **Поля:**
  - id: уникальный идентификатор товара (string).
  - total: общее количество товара (number).
  - isMyOrder: флаг, указывающий на то, является ли данный товар заказом пользователя (boolean).

### IAppState

- **Описание:** Интерфейс состояния приложения.
- **Поля:**
  - catalog: список карточек товаров (ICards[]).
  - basket: массив идентификаторов товаров в корзине (string[]).
  - preview: URL изображения товара для предпросмотра (string | null).
  - order: информация о заказе (IOrderForm | null).
  - loading: флаг, указывающий на состояние загрузки данных (boolean).

### IOrderForm

- **Описание:** Интерфейс формы заказа.
- **Поля:**
  - payment: способ оплаты (string).
  - email: адрес электронной почты покупателя (string).
  - phone: номер телефона покупателя (string).
  - address: адрес доставки (string).
  - total: общая стоимость заказа, может быть null если стоимость не установлена (number | null).

### IOrder

- **Описание:** Интерфейс заказа.
- **Поля:**
  - Унаследованы от IOrderForm.
  - items: массив идентификаторов товаров в заказе (string[]).

### FormErrors

- **Тип:** объект
- **Описание:** Тип ошибок формы, представленный как частичное соответствие полей заказа с их сообщениями об ошибках.

### IOrderResult

- **Описание:** Интерфейс результата заказа.
- **Поля:**
  - id: уникальный идентификатор заказа (string).
  - total: общая стоимость заказа, может быть null если стоимость не установлена (number | null).
